
<mat-card *ngIf="post">

  <button
    *ngIf="stateService.isModerator && post && post.visibility !== 'moderated'"
    class="moderate"
    mat-button
    (click)="moderate()">
    Moderate
  </button>

  <mat-icon class="visibility" *ngIf="post.visibility === 'public'" matTooltip="Post is public">public</mat-icon>
  <mat-icon class="visibility" *ngIf="post.visibility === 'protected'" matTooltip="Post is protected">security</mat-icon>
  <mat-icon class="visibility" *ngIf="post.visibility === 'moderated'" matTooltip="Post has been moderated">block</mat-icon>

  <div class="created">{{post.created | since}}</div>

  <div class="content" [innerHtml]="post.content | md"></div>

</mat-card>

<mat-card *ngIf="comments">
  <div *ngFor="let idx of comments" class="comment" [innerHtml]="idx.content | md">
  </div>
</mat-card>

<mat-card *ngIf="post">

  <mat-form-field class="fill-width">
    <mat-label>Comment (Markdown OK) ...</mat-label>
    <textarea
      matInput
      [(ngModel)]="comment"
      rows="10"></textarea>
  </mat-form-field>

  <div class="button-strip">

    <button
      mat-raised-button
      color="primary"
      (click)="submitComment()">
      Submit
    </button>

  </div>

</mat-card>
